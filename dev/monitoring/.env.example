# Neutryx Observability Configuration
# Copy this file to .env and adjust values as needed

# =============================================================================
# Prometheus Metrics Configuration
# =============================================================================

# Enable Prometheus metrics export
NEUTRYX_PROMETHEUS_ENABLED=true

# Metrics endpoint path
NEUTRYX_PROMETHEUS_ENDPOINT=/metrics

# Metric namespace (prefix for all metrics)
NEUTRYX_PROMETHEUS_NAMESPACE=neutryx

# Metric subsystem (sub-prefix for metrics)
NEUTRYX_PROMETHEUS_SUBSYSTEM=api

# =============================================================================
# Distributed Tracing Configuration
# =============================================================================

# Enable distributed tracing
NEUTRYX_TRACING_ENABLED=true

# Service name for trace identification
NEUTRYX_TRACING_SERVICE_NAME=neutryx-core

# Tracing exporter: 'console' (logs to stdout) or 'otlp' (sends to Jaeger/OTLP endpoint)
NEUTRYX_TRACING_EXPORTER=otlp

# OTLP endpoint for trace export (when using otlp exporter)
NEUTRYX_TRACING_OTLP_ENDPOINT=http://localhost:4318/v1/traces

# Allow insecure OTLP connection (development only)
NEUTRYX_TRACING_OTLP_INSECURE=true

# Trace sampling ratio (0.0 to 1.0)
# 1.0 = sample all traces, 0.1 = sample 10%, 0.01 = sample 1%
NEUTRYX_TRACING_SAMPLE_RATIO=1.0

# Enable automatic FastAPI instrumentation
NEUTRYX_TRACING_FASTAPI=true

# Enable automatic gRPC instrumentation
NEUTRYX_TRACING_GRPC=true

# =============================================================================
# Performance Profiling Configuration
# =============================================================================

# Enable request-level profiling
NEUTRYX_PROFILING_ENABLED=true

# Directory for storing profile outputs
NEUTRYX_PROFILING_OUTPUT_DIR=dev/profiles

# Minimum request duration (seconds) to trigger profiling
# Only requests taking longer than this will be profiled
NEUTRYX_PROFILING_MIN_DURATION=0.25

# Maximum number of profile files to retain
NEUTRYX_PROFILING_RETAIN=20

# Generate human-readable text reports alongside binary profiles
NEUTRYX_PROFILING_TEXT=true

# =============================================================================
# In-Process Alerting Configuration
# =============================================================================

# Enable lightweight in-process alerting
NEUTRYX_ALERTING_ENABLED=true

# Time window (seconds) for evaluating alert conditions
NEUTRYX_ALERT_WINDOW=300

# Error rate threshold (0.0 to 1.0) for triggering alerts
# 0.05 = 5% error rate
NEUTRYX_ALERT_ERROR_THRESHOLD=0.05

# Latency threshold (seconds) for slow request alerts
NEUTRYX_ALERT_LATENCY_THRESHOLD=2.0

# Cooldown period (seconds) between repeated alerts
NEUTRYX_ALERT_COOLDOWN=120

# Minimum number of requests before alerting can trigger
NEUTRYX_ALERT_MIN_REQUESTS=25

# =============================================================================
# Production Settings (Examples)
# =============================================================================

# For production, you might want:
# NEUTRYX_TRACING_SAMPLE_RATIO=0.01  # Sample 1% of traces
# NEUTRYX_PROFILING_ENABLED=false    # Disable profiling
# NEUTRYX_PROFILING_MIN_DURATION=2.0 # Only profile very slow requests
# NEUTRYX_ALERT_ERROR_THRESHOLD=0.02 # Lower threshold (2%)

# =============================================================================
# Cloud-Specific Configurations
# =============================================================================

# AWS X-Ray
# NEUTRYX_TRACING_EXPORTER=xray
# AWS_REGION=us-east-1

# Google Cloud Trace
# NEUTRYX_TRACING_EXPORTER=gcp
# GOOGLE_CLOUD_PROJECT=your-project-id

# Azure Application Insights
# APPLICATIONINSIGHTS_CONNECTION_STRING=your-connection-string
